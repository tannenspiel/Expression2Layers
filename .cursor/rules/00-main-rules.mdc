# ExtendScript –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Expression2Layers

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

### 1. –ù–ê–í–ò–ì–ê–¶–ò–Ø - –í–°–ï–ì–î–ê –ù–ê–ß–ò–ù–ê–ô –û–¢–°–Æ–î–ê
**–ü–ï–†–ï–î —á—Ç–µ–Ω–∏–µ–º –∫–æ–¥–∞ ‚Üí –û–¢–ö–†–û–ô `Documentation/SCRIPT_MAP.md`**
- –ù–∞—Ö–æ–¥–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –∏–º–µ–Ω–∏ –∏ –Ω–æ–º–µ—Ä–∞–º —Å—Ç—Ä–æ–∫
- –ü–æ–Ω–∏–º–∞–π —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –°–º–æ—Ç—Ä–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Ç–æ–∫–æ–≤

### 2. –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø - –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï
**SCRIPT_MAP.md** ‚Üí –û–±–Ω–æ–≤–ª—è–π –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ø–æ—Å–ª–µ –õ–Æ–ë–´–• –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞:
- –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫, –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–≤—è–∑–∏
- **–í–°–ï–ì–î–ê** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –∫–æ–¥–æ–º

**README.md** ‚Üí –û–±–Ω–æ–≤–ª—è–π –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞):
- –°–æ–¥–µ—Ä–∂–∏—Ç –û–ë–ï –≤–µ—Ä—Å–∏–∏: EN (—Å–Ω–∞—á–∞–ª–∞) –∏ RU –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π –æ—Ç–¥–µ–ª—å–Ω—ã–µ `README_RU.md` –∏–ª–∏ `README_EN.md`

## ‚ö° –ë–´–°–¢–†–´–ï –®–ê–ë–õ–û–ù–´

### –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é:
```
1. –û—Ç–∫—Ä–æ–π SCRIPT_MAP.md
2. –ù–∞–π–¥–∏ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ ‚Üí –ü–æ–ª—É—á–∏ –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
3. –ü–µ—Ä–µ–π–¥–∏ –∫ —Å—Ç—Ä–æ–∫–µ X –≤ –∫–æ–¥–µ
```

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é:
```
1. –†–µ–∞–ª–∏–∑—É–π –∫–æ–¥
2. –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï SCRIPT_MAP.md (—Å—Ç—Ä–æ–∫–∏ + –æ–ø–∏—Å–∞–Ω–∏–µ)
3. –°–ü–†–û–°–ò: "–û–±–Ω–æ–≤–∏—Ç—å README.md –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞?"
```

### –û—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É:
```
1. –ü—Ä–æ–≤–µ—Ä—å SCRIPT_MAP.md –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. –ò—Å–ø–æ–ª—å–∑—É–π $.writeln() –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ ExtendScript
3. –¢–µ—Å—Ç–∏—Ä—É–π –≤ ESTK —Å #target aftereffects
```

## üìù –ü–†–ê–í–ò–õ–ê –°–ò–ù–¢–ê–ö–°–ò–°–ê

### –ß—Ç–æ –†–ê–ë–û–¢–ê–ï–¢ –≤ ExtendScript:
```javascript
// ‚úÖ –°—Ç—Ä–æ–∫–∏
var str = "—Ç–µ–∫—Å—Ç".trim();
str.indexOf(), str.substring(), str.split()

// ‚úÖ –ú–∞—Å—Å–∏–≤—ã (—Ç–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ü–∏–∫–ª—ã)
for (var i=0; i<arr.length; i++) { arr[i] }
arr.push(), arr.pop(), arr.slice()

// ‚úÖ –§—É–Ω–∫—Ü–∏–∏
function name() {} // –ù–ï–¢ —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º!

// ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
var only // –ù–ï–¢ let/const
```

### –ß—Ç–æ –ù–ï –†–ê–ë–û–¢–ê–ï–¢:
```javascript
// ‚ùå –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –º–∞—Å—Å–∏–≤–æ–≤
arr.forEach(), arr.map(), arr.filter(), arr.find()

// ‚ùå ES6+ —Ñ–∏—á–∏
() => {}, `—à–∞–±–ª–æ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏`, let/const, –∫–ª–∞—Å—Å—ã

// ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
constructor.name // –ò—Å–ø–æ–ª—å–∑—É–π instanceof –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
```

## üîß AFTER EFFECTS –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤:
```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
if (comp instanceof CompItem)
if (layer instanceof TextLayer) 

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
if (comp.constructor.name === "CompItem")
```

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏ (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 1):
```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - AE –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Å 1
for (var i=1; i<=comp.numLayers; i++) {
    comp.layer(i)
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - JavaScript –º–∞—Å—Å–∏–≤—ã —Å 0  
for (var i=0; i<comp.numLayers; i++)
```

### Undo-–≥—Ä—É–ø–ø—ã - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
```javascript
app.beginUndoGroup("–ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏");
try {
    // –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
    app.endUndoGroup();
} catch(e) {
    app.endUndoGroup();
    throw e;
}
```

### UI —ç–ª–µ–º–µ–Ω—Ç—ã (ScriptUI):
```javascript
var win = new Window("palette", "–ó–∞–≥–æ–ª–æ–≤–æ–∫", undefined, {resizeable: true});
win.orientation = "column";
win.add("button", undefined, "–¢–µ–∫—Å—Ç");
win.center(); win.show();
```

## üö´ –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò (–ò–ó–ë–ï–ì–ê–¢–¨)

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å:
- ‚ùå `array.forEach()` ‚Üí ‚úÖ `for (var i=0; i<array.length; i++)`
- ‚ùå `constructor.name` ‚Üí ‚úÖ `instanceof CompItem` 
- ‚ùå `let/const` ‚Üí ‚úÖ `var` —Ç–æ–ª—å–∫–æ
- ‚ùå –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Üí ‚úÖ `function() {}`

### AE API:
- ‚ùå –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å 0 ‚Üí ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å 1: `comp.layer(1)`
- ‚ùå –ë–µ–∑ undo-–≥—Ä—É–ø–ø ‚Üí ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `beginUndoGroup()`/`endUndoGroup()`
- ‚ùå –°–ª–æ–∂–Ω—ã–µ regex ‚Üí ‚úÖ –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Üí ‚úÖ –ü–∞–∫–µ—Ç–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤
- ‚ùå –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–π—Å—Ç–≤ ‚Üí ‚úÖ –ö—ç—à–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### –§–∞–π–ª—ã:
- `Expression2Layers_v1.2.jsx` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
- `README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (EN —Å–Ω–∞—á–∞–ª–∞, –∑–∞—Ç–µ–º RU –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ)
- `Documentation/SCRIPT_MAP.md` - **–ö–ê–†–¢–ê –ù–ê–í–ò–ì–ê–¶–ò–ò –î–õ–Ø LLM**
- `.cursor/rules/00-main-rules.mdc` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### –ü—Ä–æ—Ü–µ—Å—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
```
–ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ ‚Üí –ê–í–¢–û –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SCRIPT_MAP.md ‚Üí –°–ü–†–û–°–ò –ø—Ä–æ README.md ‚Üí –ü—Ä–æ–≤–µ—Ä—å –æ–±–µ –≤–µ—Ä—Å–∏–∏
```

## üîó –°–°–´–õ–ö–ò
- After Effects Scripting Guide: https://ae-scripting.docsforadobe.dev/
- –§–æ–∫—É—Å –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ AE
```